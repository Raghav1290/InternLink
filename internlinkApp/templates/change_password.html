{% extends 'userbase.html' %}

{% block title %}Change Password{% endblock %}

{% set active_page = 'profile' %} {# Highlight profile as this is related #}

{% block content %}
<section class="container py-5">
    <div class="row justify-content-center text-center">
        <div class="col-lg-7">
            <h1>Change Password</h1>
            <p class="lead text-muted">Update your account password securely.</p>
        </div>
    </div>
</section>

<section class="container">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <form action="{{ url_for('change_password') }}" method="post" novalidate>
                <div class="mb-3">
                    <label for="current_password" class="form-label">Current Password</label>
                    <input type="password" class="form-control{% if form_errors.current_password %} is-invalid{% endif %}" id="current_password" name="current_password" required>
                    <div class="invalid-feedback">{{ form_errors.current_password }}</div>
                </div>
                <div class="mb-3">
                    <label for="new_password" class="form-label">New Password</label>
                    <input type="password" class="form-control{% if form_errors.new_password %} is-invalid{% endif %}" id="new_password" name="new_password" aria-describedby="newPasswordHelp" required>
                    <div id="newPasswordHelp" class="form-text">
                        Your new password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one digit, and one special character.
                    </div>
                    <div class="invalid-feedback">{{ form_errors.new_password }}</div>
                </div>
                <div class="mb-3">
                    <label for="confirm_new_password" class="form-label">Confirm New Password</label>
                    <input type="password" class="form-control{% if form_errors.confirm_new_password %} is-invalid{% endif %}" id="confirm_new_password" name="confirm_new_password" required>
                    <div class="invalid-feedback">{{ form_errors.confirm_new_password }}</div>
                </div>
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary">Change Password</button>
                    <a href="{{ url_for('profile') }}" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</section>
{% endblock %}